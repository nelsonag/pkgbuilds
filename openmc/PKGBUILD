# Maintainer: Adam Nelson <nelsonag at umich dot edu>
pkgname=openmc
pkgver=0.5.3
pkgrel=1
pkgdesc="A Monte Carlo particle transport code specializing in nuclear reactor analysis."
arch=('i686' 'x86_64')
url="https://github.com/mit-crpg/openmc"
license=('MIT')
depends=('python2>=2.7')
makedepends=('gcc-fortran>=4.6')
provides=('openmc')
options=(!strip)
source=("https://github.com/mit-crpg/openmc/archive/v0.5.3.tar.gz"
         Makefile.patch)
md5sums=('5677b7ed2aa82f959bdb8a4be377fc24'
         '70858b92a98e1dd41178dd41947c4bd5')

build() {
  cp Makefile.patch ${srcdir}/${pkgname}-${pkgver}/src/
  cd ${srcdir}/${pkgname}-${pkgver}/src/
  patch -p0 < Makefile.patch
  make GNU=yes OPTIMIZE=yes OPENMP=yes -j1
}

package() {
  cd ${srcdir}/${pkgname}-${pkgver}/src/
  make DESTDIR="${pkgdir}" prefix="/usr" install
}
