# Maintainer: Adam Nelson <nelsonag at umich dot edu>
pkgname=openmc
pkgver=0.5.4
pkgrel=1
pkgdesc="A Monte Carlo particle transport code specializing in nuclear reactor analysis."
arch=('i686' 'x86_64')
url="https://github.com/mit-crpg/openmc"
license=('MIT')
depends=('tk')
makedepends=('gcc-fortran>=4.6')
provides=('openmc')
options=(!strip)
source=("https://github.com/mit-crpg/openmc/archive/v0.5.4.tar.gz"
         Makefile.patch)
md5sums=('60de06c29bfc074f829d145362334c97'
         '3aaba7cc45886acb39f488c81d79f016')

build() {
  cp Makefile.patch ${srcdir}/${pkgname}-${pkgver}/src/
  cd ${srcdir}/${pkgname}-${pkgver}/src/
  patch -p0 < Makefile.patch
  make GNU=yes OPTIMIZE=yes OPENMP=yes -j1
}

package() {
  cd ${srcdir}/${pkgname}-${pkgver}/src/
  make DESTDIR="${pkgdir}" prefix="/usr" install
}
